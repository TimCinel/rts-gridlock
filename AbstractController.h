#ifndef ABSTRACTCONTROLLER
#define ABSTRACTCONTROLLER

/*bitwise states*/
/*all lights*/
#define STARTUP 010101010
#define STARTUP_F 010001010
#define NS_CLEAR 000100001
/*#define NS_CLEAR_F 000000000*/
#define NS_STRAIGHT 000100001
/*#define NS_STRAIGHT_F 000000000*/
#define EW_CLEAR 000100001
/*#define EW_CLEAR_F 000000000*/
#define EW_STRAIGHT 000100001
/*#define EW_STRAIGHT_F 000000000*/
#define OTHER_FLASH 000000000

/*north-south lights*/
#define NS_TRAM_G_NS 100100001
/*#define NS_TRAM_G_F_NS 000000000*/
#define NS_TRAM_F_NS 010100001
/*#define NS_TRAM_F_F_NS 000000000*/
#define NS_STRAIGHT_G_PED_G_NS 001000100
/*#define NS_STRAIGHT_G_PED_G_F_NS 000000000*/
#define NS_STRAIGHT_G_PED_F_NS 000100100
#define NS_STRAIGHT_G_PED_F_F_NS 000100000
#define NS_STRAIGHT_G_NS 000100100
/*#define NS_STRAIGHT_G_F_NS 000000000*/
#define NS_STRAIGHT_F_NS 000100010
/*#define NS_STRAIGHT_F_F_NS 000000000*/
#define EW_STRAIGHT_G_PED_G_NS 000100001
/*#define EW_STRAIGHT_G_PED_G_F_NS 000000000*/
#define EW_STRAIGHT_G_PED_F_NS 000100001
/*#define EW_STRAIGHT_G_PED_F_F_NS 000000000*/
#define EW_BOTH_RIGHT_G_NS 000100001
/*#define EW_BOTH_RIGHT_G_F_NS 000000000*/
#define EW_BOTH_RIGHT_F_NS 000100001
/*#define EW_BOTH_RIGHT_F_F_NS 000000000*/
#define EW_STRAIGHT_G_NS 000100001
/*#define EW_STRAIGHT_G_F_NS 000000000*/
#define EW_STRAIGHT_F_NS 000100001
/*#define EW_STRAIGHT_F_F_NS 000000000*/

/*east-west lights*/
#define NS_TRAM_G_EW 000100001
/*#define NS_TRAM_G_F_EW 000000000*/
#define NS_TRAM_F_EW 000100001
/*#define NS_TRAM_F_F_EW 000000000*/
#define NS_STRAIGHT_G_PED_G_EW 000100001
/*#define NS_STRAIGHT_G_PED_G_F_EW 000000000*/
#define NS_STRAIGHT_G_PED_F_EW 000100001
/*#define NS_STRAIGHT_G_PED_F_F_EW 000000000*/
#define NS_STRAIGHT_G_EW 000100001
/*#define NS_STRAIGHT_G_F_EW 000000000*/
#define NS_STRAIGHT_F_EW 000100001
/*#define NS_STRAIGHT_F_F_EW 000000000*/
#define EW_STRAIGHT_G_PED_G_EW 001000100
/*#define EW_STRAIGHT_G_PED_G_F_EW 000000000*/
#define EW_STRAIGHT_G_PED_F_EW 000100100
#define EW_STRAIGHT_G_PED_F_F_EW 000100000
#define EW_BOTH_RIGHT_G_EW 000110000
/*#define EW_BOTH_RIGHT_G_F_EW 000000000*/
#define EW_BOTH_RIGHT_F_EW 000101000
/*#define EW_BOTH_RIGHT_F_F_EW 000000000*/
#define EW_STRAIGHT_G_EW 000100100
/*#define EW_STRAIGHT_G_F_EW 000000000*/
#define EW_STRAIGHT_F_EW 000100010
/*#define EW_STRAIGHT_F_F_EW 000000000*/

/*state format: NSCar|NSTram|NSPed|EWCar|EWCarTurning|EWPed*/
/*state values: R - Red, A - Amber, G - Green, F - Flashing (Amber for Car, Red for Ped), C - Cleared (not on), W - White (tram only)*/
enum state {STARTUP, STARTUP_F, NS_CLEAR, NS_STRAIGHT, EW_CLEAR, EW_STRAIGHT, OTHER_FLASH,
            NS_TRAM_G_NS, NS_TRAM_F_NS, NS_STRAIGHT_G_PED_G_NS, NS_STRAIGHT_G_PED_F_NS, NS_STRAIGHT_G_PED_F_F_NS, NS_STRAIGHTG_NS, NS_STRAIGHT_F_NS, EW_STRAIGHT_G_PED_G_NS, EW_STRAIGHT_G_PED_F_NS, EW_BOTH_RIGHT_G_NS, EW_BOTH_RIGHT_F_NS, EW_STRAIGHT_G_NS, EW_STRAIGHT_F_NS,
            NS_TRAM_G_EW, NS_TRAM_F_EW, NS_STRAIGHT_G_PED_G_EW, NS_STRAIGHT_G_PED_F_EW, NS_STRAIGHT_G_EW, EW_STRAIGHT_F_EW, EW_STRAIGHT_G_PED_G_EW, EW_STRAIGHT_G_PED_F_EW, EW_STRAIGHT_G_PED_F_F_EW, EW_BOTH_RIGHT_G_EW, EW_BOTH_RIGHT_F_EW, EW_STRAIGHT_G_EW, EW_STRAIGHT_F_EW};
typedef state State;

class AbstractController
{
   /*constructor*/
   public:
      

   /*functions*/
   public:
      State nextState();
      State getState();
      void tick();

   /*instance variables*/
   private:
      State s;
      unsigned int t;
};

#endif